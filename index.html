<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Laberinto con pelotita IA</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>

      <!-- CÃ¡mara desde arriba -->
      <a-entity camera look-controls position="0 12 0" rotation="-90 0 0"></a-entity>

      <!-- Plataforma (suelo) -->
      <a-plane position="0 0 0" rotation="-90 0 0" width="10" height="10" color="#E0F7D4"></a-plane>

      <!-- Pelotita -->
      <a-sphere id="pelotita" position="-4 0.3 -4" radius="0.3" color="red"></a-sphere>

      <!-- Meta -->
      <a-box id="meta" position="4 0.5 4" depth="1" height="1" width="1" color="green"></a-box>

      <!-- Paredes del laberinto -->
      <a-box position="-3 0.5 -4" width="1" height="1" depth="1" color="black"></a-box>
      <a-box position="-2 0.5 -4" width="1" height="1" depth="1" color="black"></a-box>
      <a-box position="-1 0.5 -4" width="1" height="1" depth="1" color="black"></a-box>
      <a-box position="-1 0.5 -3" width="1" height="1" depth="1" color="black"></a-box>
      <a-box position="-1 0.5 -2" width="1" height="1" depth="1" color="black"></a-box>
      <a-box position="0 0.5 -2" width="1" height="1" depth="1" color="black"></a-box>
      <a-box position="1 0.5 -2" width="1" height="1" depth="1" color="black"></a-box>
      <a-box position="1 0.5 -1" width="1" height="1" depth="1" color="black"></a-box>
      <a-box position="1 0.5 0" width="1" height="1" depth="1" color="black"></a-box>
      <a-box position="2 0.5 0" width="1" height="1" depth="1" color="black"></a-box>
      <a-box position="3 0.5 0" width="1" height="1" depth="1" color="black"></a-box>
      <a-box position="3 0.5 1" width="1" height="1" depth="1" color="black"></a-box>
      <a-box position="3 0.5 2" width="1" height="1" depth="1" color="black"></a-box>

    </a-scene>

    <script>
      const pelotita = document.querySelector('#pelotita');
      const metaCoord = "4,4";

      const pared = new Set([
        "-3,-4", "-2,-4", "-1,-4", "-1,-3", "-1,-2",
        "0,-2", "1,-2", "1,-1", "1,0", "2,0", "3,0",
        "3,1", "3,2"
      ]);

      const visitados = new Set();

      let x = -4, z = -4;

      function mover() {
        const posibles = [
          [1, 0], [-1, 0], [0, 1], [0, -1]
        ];

        let caminos = posibles
          .map(([dx, dz]) => [x + dx, z + dz])
          .filter(([nx, nz]) => {
            const key = `${nx},${nz}`;
            const dentro = Math.abs(nx) <= 5 && Math.abs(nz) <= 5;
            return dentro && !pared.has(key) && !visitados.has(key);
          });

        if (caminos.length === 0) {
          x = -4;
          z = -4;
          visitados.clear();
        } else {
          const [nx, nz] = caminos[Math.floor(Math.random() * caminos.length)];
          x = nx;
          z = nz;
          visitados.add(`${x},${z}`);
        }

        pelotita.setAttribute('position', `${x} 0.3 ${z}`);

        if (`${x},${z}` === metaCoord) {
          alert("Â¡La pelotita llegÃ³ a la meta ðŸŽ‰!");
        }
      }

      setInterval(mover, 800);
    </script>
  </body>
</html>
