<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Pelotita esquiva una pared</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>

      <!-- CÃ¡mara desde arriba -->
      <a-entity camera look-controls position="0 10 0" rotation="-90 0 0"></a-entity>

      <!-- Suelo -->
      <a-plane position="0 0 0" rotation="-90 0 0" width="10" height="10" color="#D0F0C0"></a-plane>

      <!-- Pelotita -->
      <a-sphere id="pelotita" position="-3 0.3 0" radius="0.3" color="red"></a-sphere>

      <!-- Meta -->
      <a-box id="meta" position="3 0.5 0" depth="1" height="1" width="1" color="green"></a-box>

      <!-- Pared bloqueando el camino directo -->
      <a-box position="0 0.5 0" depth="1" height="1" width="1" color="black"></a-box>

    </a-scene>

    <script>
      const pelotita = document.querySelector('#pelotita');
      const pared = new Set(["0,0"]); // coordenadas de la pared
      const metaCoord = "3,0";
      const visitados = new Set();

      let x = -3, z = 0;

      function mover() {
        const posiblesMovs = [
          [1, 0],  // derecha
          [0, 1],  // arriba
          [0, -1], // abajo
          [-1, 0]  // izquierda
        ];

        let opciones = posiblesMovs
          .map(([dx, dz]) => [x + dx, z + dz])
          .filter(([nx, nz]) => {
            const key = `${nx},${nz}`;
            return !pared.has(key) && !visitados.has(key);
          });

        if (opciones.length === 0) {
          x = -3; z = 0;
          visitados.clear();
        } else {
          let [nx, nz] = opciones[Math.floor(Math.random() * opciones.length)];
          x = nx;
          z = nz;
          visitados.add(`${x},${z}`);
        }

        pelotita.setAttribute('position', `${x} 0.3 ${z}`);

        if (`${x},${z}` === metaCoord) {
          alert("Â¡La pelotita llegÃ³ a la meta esquivando la pared! ðŸŽ‰");
        }
      }

      setInterval(mover, 1000);
    </script>
  </body>
</html>
